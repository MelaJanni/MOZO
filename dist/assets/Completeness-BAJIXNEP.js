import{r as e,o as a,c as s,a as l,b as i,t,F as o,i as r,g as n,h as c,n as p,j as d}from"./vendor-CC72n-b_.js";import{q as m,u,t as v}from"./index-DjsxqbqK.js";import"./bootstrap--QliLv9A.js";const f={class:"completeness-container"},g={key:0,class:"loading-container"},b={key:1,class:"alert alert-danger"},_={key:2,class:"completeness-content"},y={class:"completion-summary"},h={class:"completion-circle"},k={viewBox:"0 0 100 100",class:"progress-ring"},C=["stroke","stroke-dasharray"],x={class:"completion-text"},q={class:"percentage"},w={class:"completion-info"},j={class:"stats"},P={class:"stat-item"},A={class:"stat-number"},E={class:"stat-item"},I={class:"stat-number"},R={class:"stat-item"},T={class:"stat-number"},U={key:0,class:"categories-section"},z={class:"categories-grid"},B={class:"category-header"},N={class:"category-name"},F={class:"category-progress"},O={class:"progress-bar"},V={class:"progress-text"},D={key:1,class:"missing-fields-section"},G={class:"missing-fields-list"},H={class:"field-info"},J={class:"field-header"},K={class:"field-label"},L={class:"field-description"},M={key:2,class:"next-steps-section"},Q={class:"next-steps-list"},S={key:3,class:"tips-section"},W={class:"tips-list"},X=m({__name:"Completeness",setup(m){const X=n(),Y=u(),Z=e(null),$=e(!0),ee=e(""),ae=()=>{"admin"===Y.currentRole?X.push({name:"admin-profile"}):X.push({name:"profile"})},se=()=>{const e=Y.currentRole;X.push({name:"waiter"===e?"waiter-dashboard":"admin"})},le=e=>e>=80?"#10b981":e>=60?"#f59e0b":"#ef4444";return a(()=>{(async()=>{var e,a,s,l;$.value=!0,ee.value="";try{const i=(await v.getActiveUserProfile()).data,t={completion_percentage:i.is_complete?100:60,message:i.is_complete?"Tu perfil está completo":"Completa tu perfil para aprovechar al máximo la app",statistics:{completed_required:i.is_complete?8:5,missing_required:i.is_complete?0:3,total_fields:8},categories:{basic_info:{name:"Información Básica",percentage:i.display_name?100:50,completed:i.display_name?2:1,total:2},contact_info:{name:"Información de Contacto",percentage:(null==(e=i.profile_data)?void 0:e.corporate_email)||(null==(a=i.profile_data)?void 0:a.phone)?80:20,completed:(null==(s=i.profile_data)?void 0:s.corporate_email)||(null==(l=i.profile_data)?void 0:l.phone)?4:1,total:5}},missing_fields:i.is_complete?[]:[{field:"display_name",label:"Nombre a mostrar",description:"El nombre que verán otros usuarios",required:!0,priority:"high"},{field:"corporate_email",label:"Email corporativo",description:"Tu email de trabajo en el negocio",required:!1,priority:"medium"}],next_steps:["Completa tu nombre a mostrar","Agrega una foto de perfil","Completa tu información de contacto"],profile_tips:["Un perfil completo genera más confianza","Actualiza tu información regularmente","Usa una foto profesional"]};Z.value=t}catch(i){console.error("Error al cargar completitud del perfil:",i),ee.value="No se pudieron cargar los datos. Por favor, inténtalo de nuevo."}finally{$.value=!1}})()}),(e,a)=>{var n,m,u;return c(),s("div",f,[l("div",{class:"completeness-header"},[l("button",{class:"back-button",onClick:se}," ← Volver "),a[0]||(a[0]=l("h1",null,"Completitud del Perfil",-1))]),$.value?(c(),s("div",g,a[1]||(a[1]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Cargando información del perfil...",-1)]))):i("",!0),ee.value?(c(),s("div",b,t(ee.value),1)):i("",!0),Z.value&&!$.value?(c(),s("div",_,[l("div",y,[l("div",h,[(c(),s("svg",k,[a[2]||(a[2]=l("circle",{cx:"50",cy:"50",r:"45",stroke:"#e5e7eb","stroke-width":"8",fill:"none"},null,-1)),l("circle",{cx:"50",cy:"50",r:"45",stroke:le(Z.value.completion_percentage),"stroke-width":"8",fill:"none","stroke-linecap":"round","stroke-dasharray":2.83*Z.value.completion_percentage+" 283",transform:"rotate(-90 50 50)"},null,8,C)])),l("div",x,[l("span",q,t(Z.value.completion_percentage)+"%",1),a[3]||(a[3]=l("span",{class:"label"},"Completado",-1))])]),l("div",w,[l("h2",null,t(Z.value.message),1),l("div",j,[l("div",P,[l("span",A,t(Z.value.statistics.completed_required),1),a[4]||(a[4]=l("span",{class:"stat-label"},"Campos completados",-1))]),l("div",E,[l("span",I,t(Z.value.statistics.missing_required),1),a[5]||(a[5]=l("span",{class:"stat-label"},"Campos faltantes",-1))]),l("div",R,[l("span",T,t(Z.value.statistics.total_fields),1),a[6]||(a[6]=l("span",{class:"stat-label"},"Total de campos",-1))])])])]),Z.value.categories?(c(),s("div",U,[a[7]||(a[7]=l("h3",null,"Progreso por categorías",-1)),l("div",z,[(c(!0),s(o,null,r(Z.value.categories,(e,a)=>{return c(),s("div",{key:a,class:"category-card"},[l("div",B,[l("i",{class:p((i=a,{basic_info:"bi-person",physical_info:"bi-activity",contact_info:"bi-telephone",professional_info:"bi-briefcase",availability:"bi-calendar"}[i]||"bi-info-circle"))},null,2),l("span",N,t(e.name),1)]),l("div",F,[l("div",O,[l("div",{class:"progress-fill",style:d({width:e.percentage+"%",backgroundColor:le(e.percentage)})},null,4)]),l("span",V,t(e.completed)+"/"+t(e.total)+" ("+t(e.percentage)+"%) ",1)])]);var i}),128))])])):i("",!0),(null==(n=Z.value.missing_fields)?void 0:n.length)?(c(),s("div",D,[a[8]||(a[8]=l("h3",null,"Campos por completar",-1)),l("div",G,[(c(!0),s(o,null,r(Z.value.missing_fields,e=>{return c(),s("div",{key:e.field,class:"missing-field-item"},[l("div",H,[l("div",J,[l("span",K,t(e.label),1),l("span",{class:"field-priority",style:d({color:(a=e.priority,{high:"#ef4444",medium:"#f59e0b",low:"#6b7280"}[a]||"#6b7280")})},t(e.required?"Requerido":"Opcional"),5)]),l("p",L,t(e.description),1)])]);var a}),128))])])):i("",!0),(null==(m=Z.value.next_steps)?void 0:m.length)?(c(),s("div",M,[a[9]||(a[9]=l("h3",null,"Próximos pasos",-1)),l("ul",Q,[(c(!0),s(o,null,r(Z.value.next_steps,e=>(c(),s("li",{key:e},t(e),1))),128))])])):i("",!0),(null==(u=Z.value.profile_tips)?void 0:u.length)?(c(),s("div",S,[a[11]||(a[11]=l("h3",null,"Consejos para tu perfil",-1)),l("div",W,[(c(!0),s(o,null,r(Z.value.profile_tips,e=>(c(),s("div",{key:e,class:"tip-item"},[a[10]||(a[10]=l("i",{class:"bi bi-lightbulb"},null,-1)),l("span",null,t(e),1)]))),128))])])):i("",!0),l("div",{class:"actions-section"},[l("button",{class:"btn btn-primary",onClick:ae}," Completar perfil ")])])):i("",!0)])}}},[["__scopeId","data-v-6d400e19"]]);export{X as default};
